# MySQL Sqitch

This is a modified version of the MySQL docker images to do the following:

* Add Sqitch to the final image
* Add a user for sqitch to use that is localhost only accessible
* Add the ability to automatically run sqitch deploy
* Adds the following ENV vars:
  * `SQITCH_RUN_DEPLOY` If set, will run sqitch deploy during setup.
  * `SQITCH_CONFIG_MOUNT` Mount point for sqitch to work from - defaults to /docker-entrypoint-sqitch.d. Must be the location of your sqitch.conf, or where your sqitch plan file is if using `SQITCH_CONFIG`.
  * Default Sqitch Environment Vars are also available - see [documentation](https://github.com/sqitchers/sqitch/blob/develop/lib/sqitch-environment.pod)
  * `SQITCH_USERNAME` will default to 'root' user provided by the base mysql docker image - set on creating the image to override - however modifying this may cause issues if the user is not given required access to the target and registry databases.
  * `SQITCH_TARGET` will default to `MYSQL_DATABASE` and throw an error if not set when `SQITCH_RUN_DEPLOY` is set.
  * `SQITCH_REGISTRY` will default to 'sqitch'. Change to use a different registry name.

Note this has only been tested on the 8.0 Docker setup.

## License

Original Docker mysql setup released under GPLv2 - see [License](LICENSE) under [original repo](https://github.com/docker-library/mysql)

Sqitch docker image items released under MIT - see [License](https://github.com/sqitchers/docker-sqitch/blob/5fc592f36cc1780ee44f30696de385ce9ae7217e/LICENSE.md) under [original repo](https://github.com/sqitchers/docker-sqitch/)

For now, the original README follows

---

# https://github.com/docker-library/mysql

## Maintained by: [the Docker Community and the MySQL Team](https://github.com/docker-library/mysql)

This is the Git repo of the [Docker "Official Image"](https://github.com/docker-library/official-images#what-are-official-images) for [`mysql`](https://hub.docker.com/_/mysql/) (not to be confused with any official `mysql` image provided by `mysql` upstream). See [the Docker Hub page](https://hub.docker.com/_/mysql/) for the full readme on how to use this Docker image and for information regarding contributing and issues.

The [full image description on Docker Hub](https://hub.docker.com/_/mysql/) is generated/maintained over in [the docker-library/docs repository](https://github.com/docker-library/docs), specifically in [the `mysql` directory](https://github.com/docker-library/docs/tree/master/mysql).

## See a change merged here that doesn't show up on Docker Hub yet?

For more information about the full official images change lifecycle, see [the "An image's source changed in Git, now what?" FAQ entry](https://github.com/docker-library/faq#an-images-source-changed-in-git-now-what).

For outstanding `mysql` image PRs, check [PRs with the "library/mysql" label on the official-images repository](https://github.com/docker-library/official-images/labels/library%2Fmysql). For the current "source of truth" for [`mysql`](https://hub.docker.com/_/mysql/), see [the `library/mysql` file in the official-images repository](https://github.com/docker-library/official-images/blob/master/library/mysql).

---

-	[![build status badge](https://img.shields.io/github/workflow/status/docker-library/mysql/GitHub%20CI/master?label=GitHub%20CI)](https://github.com/docker-library/mysql/actions?query=workflow%3A%22GitHub+CI%22+branch%3Amaster)
-	[![build status badge](https://img.shields.io/jenkins/s/https/doi-janky.infosiftr.net/job/update.sh/job/mysql.svg?label=Automated%20update.sh)](https://doi-janky.infosiftr.net/job/update.sh/job/mysql/)

| Build | Status | Badges | (per-arch) |
|:-:|:-:|:-:|:-:|
| [![amd64 build status badge](https://img.shields.io/jenkins/s/https/doi-janky.infosiftr.net/job/multiarch/job/amd64/job/mysql.svg?label=amd64)](https://doi-janky.infosiftr.net/job/multiarch/job/amd64/job/mysql/) | [![put-shared build status badge](https://img.shields.io/jenkins/s/https/doi-janky.infosiftr.net/job/put-shared/job/light/job/mysql.svg?label=put-shared)](https://doi-janky.infosiftr.net/job/put-shared/job/light/job/mysql/) |

<!-- THIS FILE IS GENERATED BY https://github.com/docker-library/docs/blob/master/generate-repo-stub-readme.sh -->
